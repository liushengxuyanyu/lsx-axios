!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios"),require("qs")):"function"==typeof define&&define.amd?define(["axios","qs"],t):(e="undefined"!=typeof globalThis?globalThis:e||self)._axios=t(e.axios,e.qs)}(this,function(e,t){"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=n(e),i=n(t);function c(e,t,n,r,o,u,i){try{var a=e[u](i),c=a.value}catch(e){return void n(e)}a.done?t(c):Promise.resolve(c).then(r,o)}function r(a){return function(){var e=this,i=arguments;return new Promise(function(t,n){var r=a.apply(e,i);function o(e){c(r,t,n,o,u,"next",e)}function u(e){c(r,t,n,o,u,"throw",e)}o(void 0)})}}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,t,n){return(o=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);r=new(Function.bind.apply(e,r));return n&&f(r,n.prototype),r}).apply(null,arguments)}function p(e){var r="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return o(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,t=function(){};return{s:t,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw o}}}}function v(e){return e.url+"&"+e.method+"&"+(e=e,JSON.stringify(e[w[e.method]]))}function m(e){return e.baseURL=R(e.baseURL,e.url),Object.assign({},(t=e,Object.keys(t).forEach(function(e){return(null===t[e]||void 0===t[e])&&delete t[e]}),t));var t}function b(){u.default.interceptors.request.eject(T),u.default.interceptors.response.eject(C)}function g(o){return new Promise(function(r,n){var e=m(o);u.default(e).then(function(e){var t,n;t=r,n=e,(e=o)&&e.isResponseData&&t(n.data),t(n)},function(e){return e.__CANCEL__?console.log(e):(t=n,void((e=e).response?t(e.response):e.message.includes("timeout")?t({status:408}):t(e)));var t})})}var w={get:"params",post:"data",put:"data",delete:"data"},R=function(e,t){var n=/.*\/$/.test(e)?e.substr(0,e.length-1):e,e=/.*\/$/.test(e)?e:e+"/";return/^\/.*/.test(t)?n:e},j=Symbol(),O=Symbol(),q=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,p(Map));var n,r,e,t,o,u=(n=i,r=l(),function(){var e,t=s(n);return d(this,r?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments))});function i(){var e;return function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),(e=u.call(this))[O]="取消重复请求",e[j]=[],e}return e=i,(t=[{key:"clearRequest",value:function(){var e,t=y(this.values());try{for(t.s();!(e=t.n()).done;)(0,e.value)("取消当前页面请求")}catch(e){t.e(e)}finally{t.f()}this.clear(),this[j].length=0}},{key:"clearCurrentRequest",value:function(t){this[j].splice(this[j].findIndex(function(e){return e===t}),1)}},{key:"getRequestList",value:function(){return this[j]}},{key:"isIncludes",value:function(e){return!!this[j].includes(e)&&(this.get(e)(this[O]),!0)}},{key:"addRequest",value:function(e){this[j].push(e)}}])&&a(e.prototype,t),o&&a(e,o),i}(),x=u.default.CancelToken,P=new q,T=u.default.interceptors.request.use(function(e){var t=v(e);return e.cancelToken=new x(function(e){P.set(t,e)}),P.isIncludes(t)||P.addRequest(t),e},function(e){return P.clearRequest(),Promise.reject(e)}),C=u.default.interceptors.response.use(function(e){var t=v(e.config);return P.clearCurrentRequest(t),e},function(e){if(u.default.isCancel(e))throw new u.default.Cancel(e.message);return P.clearRequest(),Promise.reject(e)}),_={isResponseData:!0},e=function(){var n=r(regeneratorRuntime.mark(function e(r,o){var u,t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=2<t.length&&void 0!==t[2]?t[2]:{},e.abrupt("return",new Promise(function(t,n){var e=Object.assign({method:"get",url:r,params:o},_,u);g(e).then(function(e){t(e)},function(e){n(e)})}));case 2:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),t=function(){var n=r(regeneratorRuntime.mark(function e(r,o){var u,t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=2<t.length&&void 0!==t[2]?t[2]:{},e.abrupt("return",new Promise(function(t,n){var e=Object.assign({method:"post",url:r,data:o},_,u);g(e).then(function(e){t(e)},function(e){n(e)})}));case 2:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),q=function(){var n=r(regeneratorRuntime.mark(function e(r,o){var u,t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=2<t.length&&void 0!==t[2]?t[2]:{},e.abrupt("return",new Promise(function(t,n){var e=Object.assign({method:"post",url:r,data:o,transformRequest:[function(e,t){return t["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",i.default.stringify(e)}]},_,u);g(e).then(function(e){t(e)},function(e){n(e)})}));case 2:case"end":return e.stop()}},e)}));return function(e,t){return n.apply(this,arguments)}}(),k={get:e,post:t,all:function(){var t=r(regeneratorRuntime.mark(function e(r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){var n;n=r,new Promise(function(r,t){u.default.all(n).then(u.default.spread(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r(t)}),function(e){t(e)})}).then(function(){e.apply(void 0,arguments)},function(e){t(e)})}));case 1:case"end":return e.stop()}},e)}));return function(e){return t.apply(this,arguments)}}(),cancelMap:P,postFormData:q,initDefaultConfig:function(e){u.default.defaults.timeout=e.timeout||2e4,u.default.defaults.baseURL=e.baseURL||"",u.default.defaults.headers.post["Content-Type"]=e.postContentType||"application/json;charset=UTF-8",u.default.defaults.withCredentials=!0,u.default.defaults.responseType=e.responseType||"json"},overrideRequestInterceptor:function(e,t){b(),u.default.interceptors.request.use(e,t)},overrideResponseInterceptor:function(e,t){b(),u.default.interceptors.request.use(e,t)},install:function(e){e.prototype._axios=k}};return k});
